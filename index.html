<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì•„ì´í…œ ë½‘ê¸° ì‹œë®¬ë ˆì´ì…˜</title>
  <style>
    body { margin: 0; padding: 0; font-family: sans-serif; }
    .layout {
      display: flex;
      justify-content: center;
      align-items: flex-start;
    }
    .content {
      flex: 1;
      max-width: 1000px;
      padding: 20px;
    }
    .ad-left, .ad-right {
      width: 160px;
      margin: 10px;
    }
    .banner {
      width: 100%;
      text-align: center;
      margin: 10px 0;
    }
    table { border-collapse: collapse; margin-top: 10px; width: 100%; }
    th, td { border: 1px solid #ccc; padding: 6px; font-size: 14px; text-align: center; }
    .ë“±ê¸‰-ì¼ë°˜ { color: gray; }
    .ë“±ê¸‰-í¬ê·€ { color: green; }
    .ë“±ê¸‰-ì˜ì›… { color: blue; }
    .ë“±ê¸‰-í™˜ìƒ { color: purple; }
    .ë“±ê¸‰-ì „ì„¤ { color: orange; font-weight: bold; }
    h2 { margin-top: 25px; }

    /* íƒ­ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    .tabs { margin-top: 15px; }
    .tab-btn {
      display: inline-block;
      padding: 8px 14px;
      margin-right: 5px;
      border: 1px solid #aaa;
      border-radius: 4px 4px 0 0;
      background: #eee;
      cursor: pointer;
    }
    .tab-btn.active {
      background: #fff;
      border-bottom: 1px solid #fff;
      font-weight: bold;
    }
    .tab-content { display: none; }
    .tab-content.active { display: block; }

    /* ğŸ“± ëª¨ë°”ì¼ ìµœì í™” */
    @media (max-width: 1024px) {
      .ad-left, .ad-right { display: none; } /* ì¢Œìš° ê´‘ê³  ìˆ¨ê¹€ */
      .layout { flex-direction: column; align-items: center; }
      .content { max-width: 100%; }
      .banner ins { width: 100% !important; height: auto !important; } /* ë°°ë„ˆëŠ” í™”ë©´ì— ë§ì¶¤ */
    }
  </style>
</head>
<body>
  <!-- ìƒë‹¨ ë°°ë„ˆ ê´‘ê³  -->
  <div class="banner">
    <ins class="adsbygoogle"
         style="display:block;width:728px;height:90px;margin:auto"
         data-ad-client="ca-pub-5693314639637279"
         data-ad-slot="1111111111"></ins>
  </div>

  <div class="layout">
    <!-- ì¢Œì¸¡ ê´‘ê³  -->
    <aside class="ad-left">
      <ins class="adsbygoogle"
           style="display:block;width:160px;height:600px"
           data-ad-client="ca-pub-5693314639637279"
           data-ad-slot="2222222222"></ins>
    </aside>

    <!-- ì¤‘ì•™ ì½˜í…ì¸  -->
    <main class="content">
      <h1>ì•„ì´í…œ ë½‘ê¸° ì‹œë®¬ë ˆì´ì…˜</h1>

      <!-- íƒ­ ë²„íŠ¼ -->
      <div class="tabs">
        <div class="tab-btn active" onclick="openTab('mir')">ë¯¸ë¥´ì˜ ë¹„ëŠ˜ ë½‘ê¸°</div>
        <div class="tab-btn" onclick="openTab('ring')">ì„¸ë ¨ëœ ë°˜ì§€ ëœë¤ ë°•ìŠ¤</div>
      </div>

      <!-- ë¯¸ë¥´ì˜ ë¹„ëŠ˜ íƒ­ -->
      <div id="mir" class="tab-content active">
        <h2>ë¯¸ë¥´ì˜ ë¹„ëŠ˜ ë½‘ê¸°</h2>
        <div class="controls">
          <button onclick="draw('mir',1,0)">1íšŒ</button>
          <button onclick="draw('mir',11,30000)">10+1 (30,000ì›)</button>
          <button onclick="draw('mir',24,60000)">20+4 (60,000ì›)</button>
          <button onclick="draw('mir',39,90000)">30+9 (90,000ì›)</button>
        </div>
        <h3>í†µê³„ ìš”ì•½</h3>
        <div id="summaryStats_mir">ì•„ì§ ì—†ìŒ</div>
        <h3>ê²°ê³¼ ìš”ì•½</h3>
        <div id="summary_mir">ì—†ìŒ</div>
        <h3>ì „ì²´ ê²°ê³¼</h3>
        <table id="stats_mir"><tr><th>ë“±ê¸‰</th><th>ì•„ì´í…œ</th><th>ê°œìˆ˜</th><th>ì‹¤ì œ íšë“ë¥ </th></tr></table>
      </div>

      <!-- ì„¸ë ¨ëœ ë°˜ì§€ íƒ­ -->
      <div id="ring" class="tab-content">
        <h2>ì„¸ë ¨ëœ ë°˜ì§€ ëœë¤ ë°•ìŠ¤</h2>
        <div class="controls">
          <button onclick="draw('ring',11,30000)">10+1 (30,000ì›)</button>
        </div>
        <h3>í†µê³„ ìš”ì•½</h3>
        <div id="summaryStats_ring">ì•„ì§ ì—†ìŒ</div>
        <h3>ê²°ê³¼ ìš”ì•½</h3>
        <div id="summary_ring">ì—†ìŒ</div>
        <h3>ì „ì²´ ê²°ê³¼</h3>
        <table id="stats_ring"><tr><th>ë“±ê¸‰</th><th>ì•„ì´í…œ</th><th>ê°œìˆ˜</th><th>ì‹¤ì œ íšë“ë¥ </th></tr></table>
        <h3>íˆìŠ¤í† ë¦¬ (ìµœì‹  100ê°œ)</h3>
        <div id="history_ring"></div>
      </div>
    </main>

    <!-- ìš°ì¸¡ ê´‘ê³  -->
    <aside class="ad-right">
      <ins class="adsbygoogle"
           style="display:block;width:160px;height:600px"
           data-ad-client="ca-pub-5693314639637279"
           data-ad-slot="3333333333"></ins>
    </aside>
  </div>

  <!-- í•˜ë‹¨ ë°°ë„ˆ ê´‘ê³  -->
  <div class="banner">
    <ins class="adsbygoogle"
         style="display:block;width:728px;height:90px;margin:auto"
         data-ad-client="ca-pub-5693314639637279"
         data-ad-slot="4444444444"></ins>
  </div>

  <!-- êµ¬ê¸€ ê´‘ê³  ìŠ¤í¬ë¦½íŠ¸ -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5693314639637279" crossorigin="anonymous"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>

  <!-- ë½‘ê¸° ë¡œì§ -->
  <script>
    const MAX_HISTORY = 100;
    const gradeOrder = ["ì „ì„¤","í™˜ìƒ","ì˜ì›…","í¬ê·€","ì¼ë°˜"];

    // === ì•„ì´í…œ í’€ (ì˜¤íƒ€ ìˆ˜ì • ë°˜ì˜) ===
    const items_mir = [
      { name: "í•˜ë¯¸ë¥´ì˜ ë¶ˆì”¨", grade: "ì¼ë°˜", rate: 7.00 },
      { name: "ë³´ë¯¸ë¥´ì˜ ì‚°ë“¤ë°”ëŒ", grade: "ì¼ë°˜", rate: 8.40 }, // ìˆ˜ì •
      { name: "ìˆ˜ë¯¸ë¥´ì˜ ìƒˆì‹¹", grade: "ì¼ë°˜", rate: 8.40 },
      { name: "ë¬´ë¯¸ë¥´ì˜ ë¬¼ë°©ìš¸", grade: "ì¼ë°˜", rate: 7.00 },
      { name: "ì¹˜ë¯¸ë¥´ì˜ ë³„", grade: "ì¼ë°˜", rate: 8.40 },
      { name: "ì»¤ë¯¸ë¥´ì˜ ê·¸ë¦¼ì", grade: "ì¼ë°˜", rate: 7.00 },
      { name: "ì•„ë¯¸ë¥´ì˜ ë¹›ì¡°ê°", grade: "ì¼ë°˜", rate: 8.40 },
      { name: "í•˜ë¯¸ë¥´ì˜ ë¶ˆê½ƒ", grade: "í¬ê·€", rate: 3.00 },
      { name: "ë³´ë¯¸ë¥´ì˜ ì‹¤ë°”ëŒ", grade: "í¬ê·€", rate: 3.60 }, // ìˆ˜ì •
      { name: "ìˆ˜ë¯¸ë¥´ì˜ ë¿Œë¦¬", grade: "í¬ê·€", rate: 3.60 },
      { name: "ë¬´ë¯¸ë¥´ì˜ ì—¬ìš¸", grade: "í¬ê·€", rate: 3.00 },
      { name: "ì¹˜ë¯¸ë¥´ì˜ ìœ ì„±", grade: "í¬ê·€", rate: 4.20 },
      { name: "ì»¤ë¯¸ë¥´ì˜ ì–´ìŠ¤ë¦„", grade: "í¬ê·€", rate: 4.20 },
      { name: "ì•„ë¯¸ë¥´ì˜ ì„±ê´‘", grade: "í¬ê·€", rate: 4.20 },
      { name: "í•˜ë¯¸ë¥´ì˜ ë¶ˆê¸¸", grade: "ì˜ì›…", rate: 1.00 },
      { name: "ë³´ë¯¸ë¥´ì˜ ëŒê°œë°”ëŒ", grade: "ì˜ì›…", rate: 1.80 },
      { name: "ìˆ˜ë¯¸ë¥´ì˜ ë‚˜ë¬´", grade: "ì˜ì›…", rate: 1.00 },
      { name: "ë¬´ë¯¸ë¥´ì˜ í­í¬", grade: "ì˜ì›…", rate: 1.00 },
      { name: "ì¹˜ë¯¸ë¥´ì˜ ê±°ì„±", grade: "ì˜ì›…", rate: 1.80 },
      { name: "ì»¤ë¯¸ë¥´ì˜ ì–´ë‘ ", grade: "ì˜ì›…", rate: 1.80 },
      { name: "ì•„ë¯¸ë¥´ì˜ ê´‘ì±„", grade: "ì˜ì›…", rate: 1.80 },
      { name: "í•˜ë¯¸ë¥´ì˜ í™”ì—¼", grade: "í™˜ìƒ", rate: 0.50 },
      { name: "ë³´ë¯¸ë¥´ì˜ ì§ˆí’", grade: "í™˜ìƒ", rate: 0.50 },
      { name: "ìˆ˜ë¯¸ë¥´ì˜ ìˆ²", grade: "í™˜ìƒ", rate: 0.60 },
      { name: "ë¬´ë¯¸ë¥´ì˜ ì†Œìš©ëŒì´", grade: "í™˜ìƒ", rate: 0.60 },
      { name: "ì¹˜ë¯¸ë¥´ì˜ ì„±ì¢Œ", grade: "í™˜ìƒ", rate: 0.60 },
      { name: "ì»¤ë¯¸ë¥´ì˜ ì¹ í‘", grade: "í™˜ìƒ", rate: 0.60 },
      { name: "ì•„ë¯¸ë¥´ì˜ ë…¸ì„", grade: "í™˜ìƒ", rate: 0.60 },
      { name: "í•˜ë¯¸ë¥´ì˜ ì—´í™”", grade: "ì „ì„¤", rate: 0.17 },
      { name: "ë³´ë¯¸ë¥´ì˜ í­í’", grade: "ì „ì„¤", rate: 0.33 },
      { name: "ìˆ˜ë¯¸ë¥´ì˜ ì‚°ë§¥", grade: "ì „ì„¤", rate: 0.33 },
      { name: "ë¬´ë¯¸ë¥´ì˜ í•´ë¥˜", grade: "ì „ì„¤", rate: 0.17 },
      { name: "ì¹˜ë¯¸ë¥´ì˜ ì„±ìš´", grade: "ì „ì„¤", rate: 0.33 },
      { name: "ì»¤ë¯¸ë¥´ì˜ ì‹¬ì—°", grade: "ì „ì„¤", rate: 0.33 },
      { name: "ì•„ë¯¸ë¥´ì˜ ì—¬ëª…", grade: "ì „ì„¤", rate: 0.34 },
    ];
    const items_ring = [
      { name: "íŠ¸ë¦¬í”Œ ì ‘ë‘ì‚¬ ë¶€ì  ìƒì(ë°˜ì§€ìš©)", grade: "ì „ì„¤", rate: 1.00 },
      { name: "ë‹¬ì¸ì˜ í¸ë¦°", grade: "ì „ì„¤", rate: 0.20 },
      { name: "ìˆœë¡€ì˜ ë°˜ì§€", grade: "ì „ì„¤", rate: 0.20 },
      { name: "ì—¼ì§„ì˜ ë°˜ì§€", grade: "ì „ì„¤", rate: 0.20 },
      { name: "ë™ì§„ì˜ ë°˜ì§€", grade: "ì „ì„¤", rate: 0.20 },
      { name: "í’ì§„ì˜ ë°˜ì§€", grade: "ì „ì„¤", rate: 0.20 },
      { name: "ì§€ì§„ì˜ ë°˜ì§€", grade: "ì „ì„¤", rate: 0.20 },
      { name: "ê´‘ì§„ì˜ ë°˜ì§€", grade: "ì „ì„¤", rate: 0.20 },
      { name: "ëª…ì§„ì˜ ë°˜ì§€", grade: "ì „ì„¤", rate: 0.20 },
      { name: "ìˆ˜ìˆ˜ê»˜ë¼ì˜ ë°˜ì§€ ë³´ê´€í•¨", grade: "í™˜ìƒ", rate: 5.00 },
      { name: "ì¦í­ëœ í˜¼ëˆì˜ ë§ˆë²•ì„", grade: "ì˜ì›…", rate: 10.00 },
      { name: "í˜¼ëˆì˜ ë§ˆë²•ì„ (x5)", grade: "ì˜ì›…", rate: 4.00 },
      { name: "ì¦í­ëœ í˜¼ëˆì˜ ë§ˆë²•ì„œ", grade: "í¬ê·€", rate: 15.40 },
      { name: "í˜¼ëˆì˜ ë§ˆë²•ì„œ (x2)", grade: "í¬ê·€", rate: 17.00 },
      { name: "ì´ì±„ë¡œìš´ í˜¼ëˆì˜ ìë£¨", grade: "ì¼ë°˜", rate: 46.00 },
    ];

    // === ìƒíƒœ ê´€ë¦¬ ===
    const state = {
      mir: { totalDraws:0, totalSpent:0, itemCount:{}, gradeCount:{"ì¼ë°˜":0,"í¬ê·€":0,"ì˜ì›…":0,"í™˜ìƒ":0,"ì „ì„¤":0} },
      ring: { totalDraws:0, totalSpent:0, itemCount:{}, gradeCount:{"ì¼ë°˜":0,"í¬ê·€":0,"ì˜ì›…":0,"í™˜ìƒ":0,"ì „ì„¤":0} }
    };
    const tableCells = { mir:{}, ring:{} };

    // === ì´ˆê¸° í…Œì´ë¸” ìƒì„± ===
    function initTables(){
      ["mir","ring"].forEach(tab=>{
        const pool=(tab==="mir"?items_mir:items_ring);
        const table=document.getElementById("stats_"+tab);
        gradeOrder.forEach(g=>{
          let group=pool.filter(i=>i.grade===g);
          if(group.length>0){
            let header=document.createElement("tr");
            header.innerHTML=`<td colspan="4" class="ë“±ê¸‰-${g}" style="text-align:left;font-weight:bold;background:#f0f0f0;">[${g}]</td>`;
            table.appendChild(header);
            group.forEach(item=>{
              let row=document.createElement("tr");
              row.className="ë“±ê¸‰-"+g;
              row.innerHTML=`<td>${g}</td><td>${item.name}</td><td id="${tab}_${item.name}_count">0</td><td id="${tab}_${item.name}_rate">0%</td>`;
              table.appendChild(row);
              tableCells[tab][item.name]={ count:document.getElementById(`${tab}_${item.name}_count`), rate:document.getElementById(`${tab}_${item.name}_rate`) };
            });
          }
        });
      });
    }
    initTables();

    // === íƒ­ ì—´ê¸° ===
    function openTab(tab) {
      document.querySelectorAll(".tab-btn").forEach(b=>b.classList.remove("active"));
      document.querySelectorAll(".tab-content").forEach(c=>c.classList.remove("active"));
      document.querySelector(`.tab-btn[onclick="openTab('${tab}')"]`).classList.add("active");
      document.getElementById(tab).classList.add("active");
    }

    // === ë½‘ê¸° ì‹¤í–‰ ===
    function draw(tab,count,cost){
      let pool = (tab==="mir"?items_mir:items_ring);
      let results=[];
      for(let i=0;i<count;i++) results.push(drawOneItem(pool));
      if(tab==="ring") updateHistory(tab,results);
      updateStats(tab,results,count,cost);

      // DOM ì—…ë°ì´íŠ¸ëŠ” ë‹¤ìŒ í”„ë ˆì„ìœ¼ë¡œ ì§€ì—° â†’ ë ‰ ì™„í™”
      requestAnimationFrame(()=>{
        showResult(tab,results);
      });
    }

    function drawOneItem(pool){
      const rand=Math.random()*100; let cumulative=0;
      for(let item of pool){ cumulative+=item.rate; if(rand<=cumulative) return item; }
    }

    // === í†µê³„ ê°±ì‹  ===
    function updateStats(tab,results,count,cost){
      let st=state[tab];
      st.totalDraws+=count; st.totalSpent+=cost;
      results.forEach(i=>{
        if(!st.itemCount[i.name]) st.itemCount[i.name]={grade:i.grade,count:0};
        st.itemCount[i.name].count++; st.gradeCount[i.grade]++;
        let cell=tableCells[tab][i.name];
        if(cell){
          cell.count.textContent=st.itemCount[i.name].count;
          cell.rate.textContent=((st.itemCount[i.name].count/st.totalDraws)*100).toFixed(2)+"%";
        }
      });
      document.getElementById("summaryStats_"+tab).innerHTML=`
        ì´ ë½‘ê¸° íšŸìˆ˜: ${st.totalDraws}íšŒ<br>
        ì´ ì‚¬ìš© ê¸ˆì•¡: ${st.totalSpent.toLocaleString()}ì›<br>
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br>
        <span class="ë“±ê¸‰-ì¼ë°˜">ì¼ë°˜: ${st.gradeCount["ì¼ë°˜"]}ê°œ</span><br>
        <span class="ë“±ê¸‰-í¬ê·€">í¬ê·€: ${st.gradeCount["í¬ê·€"]}ê°œ</span><br>
        <span class="ë“±ê¸‰-ì˜ì›…">ì˜ì›…: ${st.gradeCount["ì˜ì›…"]}ê°œ</span><br>
        <span class="ë“±ê¸‰-í™˜ìƒ">í™˜ìƒ: ${st.gradeCount["í™˜ìƒ"]}ê°œ</span><br>
        <span class="ë“±ê¸‰-ì „ì„¤">ì „ì„¤: ${st.gradeCount["ì „ì„¤"]}ê°œ</span>`;
    }

    // === ê²°ê³¼ ìš”ì•½ ===
    function showResult(tab,results){
      let summaryMap={};
      results.forEach(i=>{
        if(!summaryMap[i.name]) summaryMap[i.name]={grade:i.grade,count:0};
        summaryMap[i.name].count++;
      });
      let html=Object.entries(summaryMap).map(([n,o])=>`<span class="ë“±ê¸‰-${o.grade}">[${o.grade}] ${n} x${o.count}</span>`).join("<br>");
      document.getElementById("summary_"+tab).innerHTML=html;
    }

    // === íˆìŠ¤í† ë¦¬ ê°±ì‹  ===
    function updateHistory(tab,results){
      const history=document.getElementById("history_"+tab);
      results.forEach(i=>{
        let div=document.createElement("div");
        div.className="item ë“±ê¸‰-"+i.grade;
        div.textContent=`[${i.grade}] ${i.name}`;
        history.prepend(div);
      });
      while(history.childNodes.length>MAX_HISTORY){ history.removeChild(history.lastChild); }
    }
  </script>
</body>
</html>
